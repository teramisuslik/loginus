# Инструкция по загрузке исправления

## Проблема
После выхода из AI Aggregator и попытки войти заново, пользователь автоматически авторизуется без возможности выбрать аккаунт.

## Исправление
Добавлена проверка OAuth flow по cookies (которые устанавливает бэкенд), чтобы при OAuth flow всегда показывать форму входа, даже если есть старый токен.

## Команды для загрузки

### Вариант 1: Через Git Bash или WSL
```bash
# Скопировать файл на сервер
scp -i C:\Users\teramisuslik\.ssh\id_ed25519 frontend/index.html root@45.144.176.42:/tmp/index.html

# Подключиться к серверу и скопировать в контейнер
ssh -i C:\Users\teramisuslik\.ssh\id_ed25519 root@45.144.176.42 "docker cp /tmp/index.html loginus-backend:/app/frontend/index.html && rm /tmp/index.html"
```

### Вариант 2: Через SSH напрямую
```bash
# 1. Подключиться к серверу
ssh -i C:\Users\teramisuslik\.ssh\id_ed25519 root@45.144.176.42

# 2. На сервере выполнить:
# Сначала скопировать файл через scp из локальной машины, или отредактировать напрямую на сервере
```

### Вариант 3: Через docker exec (если файл уже на сервере)
```bash
# На сервере:
docker cp /tmp/index.html loginus-backend:/app/frontend/index.html
```

## Что изменилось

1. **В функции проверки токена (DOMContentLoaded)**:
   - Добавлена проверка OAuth cookies (`oauth_client_id`, `oauth_redirect_uri`)
   - Если есть OAuth cookies, это считается OAuth flow, и форма входа показывается всегда

2. **В функции `verifyTokenAndRedirect`**:
   - Добавлена такая же проверка OAuth cookies
   - При OAuth flow функция не проверяет токен автоматически

## Проверка после загрузки

После загрузки файла проверьте:
1. Войти в AI Aggregator
2. Выйти из аккаунта
3. Нажать "Вход/Регистрация"
4. Должна появиться форма выбора метода входа, а не автоматический вход

